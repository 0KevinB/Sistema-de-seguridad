import{r as g,c as u,a as s,e as V,f as w,g as q,w as x,b as v,F as b,k as _,q as E,t as p,h as M,o as l,i as F,d as h,s as N,v as T}from"./index-BOzkANz2.js";import{u as j}from"./userService-DiuQdIr4.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"dashboard"},U={class:"navbar"},B={class:"nav-content"},D={class:"dashboard-content"},I={class:"config-card"},G={class:"pregunta-header"},R=["onClick"],z={class:"form-group"},O=["onUpdate:modelValue","disabled"],$=["value"],H={class:"form-group"},J=["onUpdate:modelValue","disabled"],K=["disabled"],Q=["disabled"],W={__name:"ConfigurarPreguntasMFA",setup(X){const C=M(),o=g(!1),t=g(""),y=["¿Cuál es tu color favorito?","¿En qué ciudad naciste?","¿Cuál es el nombre de tu primera mascota?","¿Cuál es tu comida favorita?","¿En qué escuela estudiaste la primaria?","¿Cuál es tu película favorita?","¿Cuál es el nombre de tu mejor amigo de la infancia?","¿En qué mes y año te graduaste?","¿Cuál es tu libro favorito?","¿Cuál es el nombre de tu primer profesor?"],r=g([{pregunta:"",respuesta:""},{pregunta:"",respuesta:""}]),k=()=>{r.value.length<5&&r.value.push({pregunta:"",respuesta:""})},P=d=>{r.value.splice(d,1)},S=async()=>{var n,i;const d=r.value.map(e=>e.pregunta);if(d.filter((e,c)=>d.indexOf(e)!==c).length>0){t.value="❌ No puedes seleccionar la misma pregunta dos veces";return}if(r.value.filter(e=>e.respuesta&&e.respuesta!==e.respuesta.toLowerCase()).length>0){t.value="❌ Todas las respuestas deben estar en minúsculas";return}o.value=!0,t.value="";try{const e=r.value.map(f=>({pregunta:f.pregunta,respuesta:f.respuesta.toLowerCase().trim()})),c=await j.configurarMFA("preguntas",{preguntasRespuestas:e});c.success?(t.value="✅ Preguntas de seguridad configuradas correctamente",setTimeout(()=>{C.push("/configurar-mfa")},2e3)):t.value="❌ "+c.mensaje}catch(e){t.value="❌ Error: "+(((i=(n=e.response)==null?void 0:n.data)==null?void 0:i.mensaje)||e.message)}finally{o.value=!1}};return(d,a)=>{const m=q("router-link");return l(),u("div",L,[s("nav",U,[s("div",B,[V(m,{to:"/configurar-mfa",class:"back-link"},{default:w(()=>[...a[0]||(a[0]=[F("← Volver",-1)])]),_:1})])]),s("div",D,[s("div",I,[a[5]||(a[5]=s("h1",{class:"config-title"},"Configurar Preguntas de Seguridad",-1)),a[6]||(a[6]=s("p",{class:"config-subtitle"},"Selecciona y responde al menos 2 preguntas",-1)),s("form",{onSubmit:x(S,["prevent"]),class:"preguntas-form"},[(l(!0),u(b,null,_(r.value,(n,i)=>(l(),u("div",{key:i,class:"pregunta-group"},[s("div",G,[s("h3",null,"Pregunta "+p(i+1),1),r.value.length>2?(l(),u("button",{key:0,onClick:e=>P(i),type:"button",class:"btn-remove"}," ✕ ",8,R)):v("",!0)]),s("div",z,[a[2]||(a[2]=s("label",null,"Selecciona una pregunta",-1)),h(s("select",{"onUpdate:modelValue":e=>n.pregunta=e,required:"",disabled:o.value},[a[1]||(a[1]=s("option",{value:""},"-- Selecciona --",-1)),(l(),u(b,null,_(y,e=>s("option",{key:e,value:e},p(e),9,$)),64))],8,O),[[N,n.pregunta]])]),s("div",H,[a[3]||(a[3]=s("label",null,"Tu respuesta",-1)),h(s("input",{type:"text","onUpdate:modelValue":e=>n.respuesta=e,required:"",disabled:o.value,placeholder:"Escribe tu respuesta (minúsculas)"},null,8,J),[[T,n.respuesta]]),a[4]||(a[4]=s("small",{class:"hint"},"La respuesta debe estar en minúsculas",-1))])]))),128)),r.value.length<5?(l(),u("button",{key:0,onClick:k,type:"button",class:"btn-add",disabled:o.value}," + Agregar otra pregunta ",8,K)):v("",!0),t.value?(l(),u("div",{key:1,class:E(["alert",t.value.includes("✅")?"alert-success":"alert-error"])},p(t.value),3)):v("",!0),s("button",{type:"submit",class:"btn-primary",disabled:o.value},p(o.value?"Guardando...":"Guardar Preguntas"),9,Q)],32)])])])}}},se=A(W,[["__scopeId","data-v-422f3ff8"]]);export{se as default};
