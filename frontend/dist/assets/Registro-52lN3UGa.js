import{u as E,r as n,c as d,a as s,b as _,w as N,d as f,v as g,t as m,i as y,e as U,f as w,g as T,h as A,o as u}from"./index-BOzkANz2.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"auth-container"},j={class:"auth-card"},B={class:"form-group"},q=["disabled"],D={class:"form-group"},F=["disabled"],G={class:"form-group"},J=["disabled"],O={key:0,class:"error-message"},Y=["disabled"],z={key:1,class:"success-card"},H={class:"credentials-box"},K={class:"credential-item"},L={class:"credential-value"},P={class:"credential-item"},Q={class:"credential-value"},W={key:2,class:"auth-links"},X={__name:"Registro",setup(Z){const C=A(),k=E(),o=n({nombre:"",email:"",telefono:""}),a=n(!1),i=n(""),v=n(!1),p=n({usuario:"",contrasena:""}),x=async()=>{var b,e,c,t;a.value=!0,i.value="";try{const r=o.value.nombre.trim().split(" "),h=r[0]||"",R=r.slice(1).join(" ")||"",S={nombres:h,apellidos:R,email:o.value.email,telefono:o.value.telefono},l=await k.registro(S);l.success?(v.value=!0,p.value={usuario:l.datos.usuario,contrasena:l.datos.contrasena},localStorage.setItem("pendingValidation",JSON.stringify({idUsuario:l.datos.idUsuario,idMFA:l.datos.idMFA,email:l.datos.email}))):i.value=l.mensaje||"Error al registrar usuario"}catch(r){i.value=((e=(b=r.response)==null?void 0:b.data)==null?void 0:e.mensaje)||((t=(c=r.response)==null?void 0:c.data)==null?void 0:t.message)||"Error al conectar con el servidor"}finally{a.value=!1}},V=()=>{C.push("/validar-cuenta")};return(b,e)=>{const c=T("router-link");return u(),d("div",M,[s("div",j,[e[13]||(e[13]=s("h1",{class:"auth-title"},"Crear Cuenta",-1)),e[14]||(e[14]=s("p",{class:"auth-subtitle"},"Registro de nuevo usuario",-1)),v.value?(u(),d("div",z,[e[9]||(e[9]=s("div",{class:"success-icon"},"✓",-1)),e[10]||(e[10]=s("h2",{class:"success-title"},"¡Registro Exitoso!",-1)),s("div",H,[e[8]||(e[8]=s("p",{class:"credentials-label"},"Tus credenciales generadas:",-1)),s("div",K,[e[6]||(e[6]=s("span",{class:"credential-label"},"Usuario:",-1)),s("span",L,m(p.value.usuario),1)]),s("div",P,[e[7]||(e[7]=s("span",{class:"credential-label"},"Contraseña:",-1)),s("span",Q,m(p.value.contrasena),1)])]),e[11]||(e[11]=s("div",{class:"info-message"},[s("p",null,[s("strong",null,"Importante:"),y(" Guarda estas credenciales en un lugar seguro.")]),s("p",null,"Se ha enviado un código de verificación a tu correo electrónico.")],-1)),s("button",{onClick:V,class:"btn-primary"}," Validar Cuenta ")])):(u(),d("form",{key:0,onSubmit:N(x,["prevent"]),class:"auth-form"},[s("div",B,[e[3]||(e[3]=s("label",{for:"nombre"},"Nombre Completo",-1)),f(s("input",{type:"text",id:"nombre","onUpdate:modelValue":e[0]||(e[0]=t=>o.value.nombre=t),required:"",disabled:a.value,placeholder:"Tu nombre completo"},null,8,q),[[g,o.value.nombre]])]),s("div",D,[e[4]||(e[4]=s("label",{for:"email"},"Correo Electrónico",-1)),f(s("input",{type:"email",id:"email","onUpdate:modelValue":e[1]||(e[1]=t=>o.value.email=t),required:"",disabled:a.value,placeholder:"tu@email.com"},null,8,F),[[g,o.value.email]])]),s("div",G,[e[5]||(e[5]=s("label",{for:"telefono"},"Teléfono (opcional)",-1)),f(s("input",{type:"tel",id:"telefono","onUpdate:modelValue":e[2]||(e[2]=t=>o.value.telefono=t),disabled:a.value,placeholder:"+52 123 456 7890"},null,8,J),[[g,o.value.telefono]])]),i.value?(u(),d("div",O,m(i.value),1)):_("",!0),s("button",{type:"submit",class:"btn-primary",disabled:a.value},m(a.value?"Registrando...":"Registrar"),9,Y)],32)),v.value?_("",!0):(u(),d("div",W,[U(c,{to:"/login"},{default:w(()=>[...e[12]||(e[12]=[y("¿Ya tienes cuenta? Inicia sesión",-1)])]),_:1})]))])])}}},se=I(X,[["__scopeId","data-v-1c0bd524"]]);export{se as default};
