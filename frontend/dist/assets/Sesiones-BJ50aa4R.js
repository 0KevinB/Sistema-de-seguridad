import{a as f}from"./adminService-D9fYIKvy.js";import{_ as b}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as u,j as y,c as n,a as s,b as g,t,F as S,k,o}from"./index-BOzkANz2.js";const C={class:"admin-view"},w={class:"filters"},A=["disabled"],N={class:"pagination-info"},E={key:0,class:"success-message"},j={key:1,class:"loading"},F={key:2,class:"error-message"},U={key:3,class:"sesiones-grid"},x={class:"sesion-header"},B={class:"sesion-name"},D={class:"sesion-info"},I={class:"info-item"},L={class:"value"},M={class:"info-item"},T={class:"value"},V={class:"info-item"},z={class:"value"},X={class:"info-item"},$={class:"value"},q=["onClick","disabled"],G={key:0,class:"empty-state"},H={__name:"Sesiones",setup(J){const c=u([]),d=u(!0),l=u(""),r=u(""),v=u(null),m=async()=>{var i,e;d.value=!0,l.value="",r.value="";try{const a=await f.obtenerSesionesActivas();c.value=a.sesiones||[]}catch(a){l.value=((e=(i=a.response)==null?void 0:i.data)==null?void 0:e.mensaje)||"Error al cargar sesiones activas"}finally{d.value=!1}},h=async i=>{var e,a;if(confirm("¬øEst√°s seguro de cerrar esta sesi√≥n?")){v.value=i,l.value="",r.value="";try{const _=await f.cerrarSesion(i);r.value=_.mensaje||"Sesi√≥n cerrada correctamente",setTimeout(()=>{m(),r.value=""},1500)}catch(_){l.value=((a=(e=_.response)==null?void 0:e.data)==null?void 0:a.mensaje)||"Error al cerrar sesi√≥n"}finally{v.value=null}}};y(()=>{m()});const p=i=>{if(!i)return"N/A";const e=new Date(i);return isNaN(e.getTime())?"Fecha inv√°lida":e.toLocaleString("es-MX",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})};return(i,e)=>(o(),n("div",C,[e[5]||(e[5]=s("h1",{class:"view-title"},"Sesiones Activas",-1)),e[6]||(e[6]=s("p",{class:"view-subtitle"},"Usuarios conectados actualmente",-1)),s("div",w,[s("button",{onClick:m,class:"btn-refresh",disabled:d.value}," üîÑ "+t(d.value?"Cargando...":"Actualizar"),9,A),s("div",N,t(c.value.length)+" sesiones activas ",1)]),r.value?(o(),n("div",E,t(r.value),1)):g("",!0),d.value&&!c.value.length?(o(),n("div",j,"Cargando...")):l.value?(o(),n("div",F,t(l.value),1)):(o(),n("div",U,[(o(!0),n(S,null,k(c.value,a=>(o(),n("div",{key:a.idSession,class:"sesion-card"},[s("div",x,[e[0]||(e[0]=s("span",{class:"sesion-icon"},"üë§",-1)),s("div",null,[s("h3",null,t(a.Usuario),1),s("p",B,t(a.nombres)+" "+t(a.apellidos),1)])]),s("div",D,[s("div",I,[e[1]||(e[1]=s("span",{class:"label"},"Email:",-1)),s("span",L,t(a.email),1)]),s("div",M,[e[2]||(e[2]=s("span",{class:"label"},"ID Usuario:",-1)),s("span",T,t(a.idUsuario),1)]),s("div",V,[e[3]||(e[3]=s("span",{class:"label"},"Inicio:",-1)),s("span",z,t(p(a.fecha)),1)]),s("div",X,[e[4]||(e[4]=s("span",{class:"label"},"√öltima Actividad:",-1)),s("span",$,t(p(a.ultimaActividad)),1)])]),s("button",{onClick:_=>h(a.idSession),class:"btn-cerrar",disabled:v.value===a.idSession},t(v.value===a.idSession?"Cerrando...":"‚ùå Cerrar Sesi√≥n"),9,q)]))),128)),c.value.length?g("",!0):(o(),n("div",G," No hay sesiones activas "))]))]))}},Q=b(H,[["__scopeId","data-v-f0818b70"]]);export{Q as default};
