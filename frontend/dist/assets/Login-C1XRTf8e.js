import{u as y,r as u,c as d,a as s,w as S,b as x,d as c,v as p,t as v,e as m,f,g as k,h as w,o as _,i as b}from"./index-BOzkANz2.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";const V={class:"auth-container"},N={class:"auth-card"},C={class:"form-group"},M=["disabled"],q={class:"form-group"},B=["disabled"],E={key:0,class:"error-message"},L=["disabled"],U={class:"auth-links"},j={__name:"Login",setup(A){const l=w(),g=y(),t=u({usuario:"",contrasena:""}),o=u(!1),r=u(""),h=async()=>{var n,e;o.value=!0,r.value="";try{const a=await g.login(t.value.usuario,t.value.contrasena);a.success?a.requiereMFA?l.push("/mfa"):l.push("/dashboard"):r.value=a.mensaje||"Error al iniciar sesión"}catch(a){r.value=((e=(n=a.response)==null?void 0:n.data)==null?void 0:e.mensaje)||"Error al conectar con el servidor"}finally{o.value=!1}};return(n,e)=>{const a=k("router-link");return _(),d("div",V,[s("div",N,[e[6]||(e[6]=s("h1",{class:"auth-title"},"Iniciar Sesión",-1)),e[7]||(e[7]=s("p",{class:"auth-subtitle"},"Sistema de Seguridad Multi-Factor",-1)),s("form",{onSubmit:S(h,["prevent"]),class:"auth-form"},[s("div",C,[e[2]||(e[2]=s("label",{for:"usuario"},"Usuario",-1)),c(s("input",{type:"text",id:"usuario","onUpdate:modelValue":e[0]||(e[0]=i=>t.value.usuario=i),required:"",disabled:o.value,placeholder:"Ingrese su usuario"},null,8,M),[[p,t.value.usuario]])]),s("div",q,[e[3]||(e[3]=s("label",{for:"contrasena"},"Contraseña",-1)),c(s("input",{type:"password",id:"contrasena","onUpdate:modelValue":e[1]||(e[1]=i=>t.value.contrasena=i),required:"",disabled:o.value,placeholder:"Ingrese su contraseña"},null,8,B),[[p,t.value.contrasena]])]),r.value?(_(),d("div",E,v(r.value),1)):x("",!0),s("button",{type:"submit",class:"btn-primary",disabled:o.value},v(o.value?"Iniciando sesión...":"Iniciar Sesión"),9,L)],32),s("div",U,[m(a,{to:"/registro"},{default:f(()=>[...e[4]||(e[4]=[b("¿No tienes cuenta? Regístrate",-1)])]),_:1}),m(a,{to:"/recuperar"},{default:f(()=>[...e[5]||(e[5]=[b("¿Olvidaste tu contraseña?",-1)])]),_:1})])])])}}},R=I(j,[["__scopeId","data-v-db847ee9"]]);export{R as default};
